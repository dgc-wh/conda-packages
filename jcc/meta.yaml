package:
  name: jcc
  version: "{{ environ.get('JCC_VERSION') }}"

build:
  number: 0

source:
  fn: "JCC-{{ environ.get('JCC_VERSION') }}.tar.gz"
  url: "https://pypi.python.org/packages/source/J/JCC/JCC-{{ environ.get('JCC_VERSION') }}.tar.gz"
  md5: "{{ environ.get('JCC_HASH') }}"

requirements:
  build:
    - java-jdk
    - python
    - setuptools
  run:
    - java-jdk
    - python

test:
  commands:
    - export JAVA_HOME=$(readlink -f $PREFIX/bin/java | sed "s:/bin/java::")
    - export LD_LIBRARY_PATH=$PREFIX/lib:$PREFIX/jre/lib:$LD_LIBRARY_PATH
    - printenv
    - ls -al /opt/miniconda/envs/_test/lib/python2.7/site-packages/jcc
    - cat /opt/miniconda/envs/_test/lib/python2.7/site-packages/jcc/config.py
    - python -c 'import jcc'

about:
  home: http://lucene.apache.org/pylucene/jcc/index.html
  license: Apache
